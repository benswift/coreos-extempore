#cloud-config
coreos:
  etcd:
    discovery: https://discovery.etcd.io/30857a03766a605d6077b38beda84c5e
    addr: $public_ipv4:4001
    peer-addr: $public_ipv4:7001
  fleet:
    public-ip: $public_ipv4
  units:
  - name: etcd.service
    command: start
  - name: fleet.socket
    command: start
    content: |
      [Socket]
      # Talk to the API over a Unix domain socket (default)
      #ListenStream=/var/run/fleet.sock
      # Talk to the API over an exposed port, uncomment to enable and choose a port
      ListenStream=8080
      Service=fleet.service

      [Install]
      WantedBy=sockets.target
  - name: fleet.service
    command: start
.service
      command: start

# Local Variables:
# major-mode: conf-mode
# End:
